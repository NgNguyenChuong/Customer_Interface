<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thanh toán</title>
    <link rel="stylesheet" href="../style/payment.css">
    <link rel="stylesheet" href="../icon/css/all.css">
    <link rel="stylesheet" href="../style/generall.css">


</head>
<body>
    <div class="container">
        <h1>Organica</h1>
        <div class="breadcrumb">
            <a href="./Gio_hang.html">Giỏ hàng</a> &gt;
            <span>Thông tin giao hàng</span> &gt;
            <span>Phương thức thanh toán</span>
        </div>

        <div class="main-content">
            <div class="shipping-info">
                <h2>Thông tin giao hàng</h2>
                <div class="login-prompt">
                    <span>Bạn đã có tài khoản?</span>
                    <a href="./login.html" class="login-link">Đăng nhập</a>
                </div>

                <form class="shipping-form">
                    <input type="text" placeholder="Họ và tên" required>
                    <div class="form-row">
                        <input type="email" placeholder="Email" required>
                        <input type="tel" placeholder="Số điện thoại" required>
                    </div>

                    <div class="delivery-section">
                        <div class="delivery-option">
                            <label class="radio-option">
                                <input type="radio" name="delivery" value="delivery" checked>
                                <span>Giao tận nơi</span>
                            </label>
                            
                            <div id="deliveryAddressForm" class="delivery-form">
                                <input type="text" placeholder="Địa chỉ" required>
                                <div class="location-selects">
                                    <div class="select-group">
                                        <label>Tỉnh / thành</label>
                                        <select id="city" name="city">
                                            <option value="">Chọn tỉnh / thành</option>
                                        </select>
                                    </div>
                                    <div class="select-group">
                                        <label>Quận / huyện</label>
                                        <select id="district" name="district">
                                            <option value="">Chọn quận / huyện</option>
                                        </select>
                                    </div>
                                    <div class="select-group">
                                        <label>Phường / xã</label>
                                        <select id="ward" name="ward">
                                            <option value="">Chọn phường / xã</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="delivery-option">
                            <label class="radio-option">
                                <input type="radio" name="delivery" value="store">
                                <span>Nhận tại cửa hàng</span>
                            </label>
                            
                            <div id="storeAddressForm" class="store-form hidden">
                                <select id="storeLocation" name="storeLocation">
                                    <option value="">Chọn cửa hàng</option>
                                    <option value="store1">Chi nhánh 1 - 123 Nguyễn Văn A, Q.1</option>
                                    <option value="store2">Chi nhánh 2 - 456 Lê Văn B, Q.2</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="buttons">
                        <a href="./Gio_hang.html" class="back-btn">Giỏ hàng</a>
                        <button type="button" class="next-btn" onclick="redirectToPayment()">Tiếp tục đến phương thức thanh toán</button>
                    </div>
                </form>
            </div>

              
            </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
            const cartItemsContainer = document.querySelector('.cart-items');
            const subtotalElement = document.querySelector('.subtotal span:last-child');
            const totalElement = document.querySelector('.total span:last-child');
    
            let subtotal = 0;
    
            cartItems.forEach(item => {
                const itemTotal = item.price * item.quantity;
                subtotal += itemTotal;
    
                const itemElement = document.createElement('div');
                itemElement.classList.add('cart-item');
                itemElement.innerHTML = `
                    <div class="cart-item-image">
                        <img src="${item.image}" alt="${item.name}">
                    </div>
                    <div class="cart-item-details">
                        <span class="cart-item-name">${item.name}</span><br>
                        <span class="cart-item-quantity">Số lượng: ${item.quantity}</span><br>
                        <span class="cart-item-price">${itemTotal.toLocaleString('vi-VN')}₫</span>
                    </div>
                `;
                cartItemsContainer.appendChild(itemElement);
            });
    
            subtotalElement.textContent = `${subtotal.toLocaleString('vi-VN')}₫`;
            totalElement.textContent = `${subtotal.toLocaleString('vi-VN')}₫`;
        });
        </script>
    <script src="../js/function.js"></script>
    <script>
    function redirectToPayment() {
        // Lưu thông tin giao hàng vào localStorage nếu cần
        const formData = {
            name: document.querySelector('input[placeholder="Họ và tên"]').value,
            email: document.querySelector('input[placeholder="Email"]').value,
            phone: document.querySelector('input[placeholder="Số điện thoại"]').value,
            address: document.querySelector('input[placeholder="Địa chỉ"]').value,
            city: document.querySelector('#city').value,
            district: document.querySelector('#district').value,
            ward: document.querySelector('#ward').value
        };
        
        localStorage.setItem('shippingInfo', JSON.stringify(formData));
        
        // Chuyển hướng đến trang thanh toán
        window.location.href = './trangthanhtoan.html';
    }

    // Ngăn chặn form submit mặc định
    document.querySelector('.shipping-form').addEventListener('submit', function(e) {
        e.preventDefault();
        redirectToPayment();
    });
    </script>
</body>
</html>
